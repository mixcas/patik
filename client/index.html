<head>
  <title>patik</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <header>
    <h1>Patik</h1>
  </header>
  <div class="container">
    {{> allDrops}}
  </div>
    {{ > addDrop}}
    {{> newDrop}}
</body>

<template name="addDrop">
  <button id="addDrop">+</button>
</template>

<template name="newDrop">
  <div class="newDrop">
    <form role="form">
      <input class="dropFileInput" type="file" accept="image/*, audio/*" capture="camera">
      <input class="dropCaptionInput" type="text" placeholder="caption (optional)" maxlenght="250">
      <input class="submitCaption" type="submit" value="â†’">
    </form>
    <button class="closeNewDrop">&#9587;</button>
  </div>
</template>

<template name="allDrops">
  <div class="drops-container">
    {{#each drops}}
      <div class="drop">
        {{#if isImage}}
          <img class="img-responsive" src="{{this.url}}">
        {{/if}}

        {{#if isAudio isUploaded}}
        <audio controls>
          <source src="{{this.url}}">
        </audio>
        {{/if}}
        
        {{#unless this.isUploaded}}
          <marquee>UPLOADING</marquee>
        {{/unless}}

        {{#if metadata.caption }}
          <p class="dropCaption">{{metadata.caption}}</p>
        {{/if}}
      </div>
    {{/each}}
  </div>
</template>
